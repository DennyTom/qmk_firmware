#include QMK_KEYBOARD_H

// use pyexpander to generate keymap.c:
// python3 expander3.py -f keymap.c.in | cat -s > keymap.c
// the preprocessor code is written to be readable not to produce nice output

$py(engine_path = "../../../../users/dennytom/chording_engine/")

enum pseudolayers {
    ALWAYS_ON, QWERTY, NUM, SYM, MOVE, MEDIA
};

// Macros to simplify chord definitions
$include(engine_path + "macros.inc")

// Keyboard states and settings
$include("keyboard.inc")

// The chord structure and chord functions (send key, switch pseudolayer, ...)
$include(engine_path + "chord.inc")

// Add all chords

$butterstick_cols("ALWAYS_ON",
    "", "", "", "", "",       "",       "", "", "", "", "",
    "", "", "", "", "",       "LEAD",   "", "", "", "", "",
    "", "", "", "", "",       "",       "", "", "", "", "",
                "", "",       "",       "", "")

$secret_chord("ALWAYS_ON", "CLEAR_KB",
    "X", "X", "", "", "", "",             "", "", "", "", "X", "X",
    "X", "X", "", "", "", "",             "", "", "", "", "X", "X",
                  "", "", "",             "", "", "")

$secret_chord("ALWAYS_ON", "CMD",
    "X", "", "", "", "", "",             "", "", "", "", "", "X",
    "X", "", "", "", "", "",             "", "", "", "", "", "X",
                 "", "", "",             "", "", "")

$secret_chord("ALWAYS_ON", "RESET",
    "X", "X", "X", "", "", "",             "", "", "", "X", "X", "X",
    "X", "X", "X", "", "", "",             "", "", "", "X", "X", "X",
                   "", "", "",             "", "", "")

$secret_chord("ALWAYS_ON", "ESC",
    "", "", "", "", "",  "",             "", "",  "", "", "", "",
    "", "", "", "", "",  "",             "", "",  "", "", "", "",
                "", "X", "",             "", "X", "")

$butterstick_rows("QWERTY",
                "TAB",  "Q", "W", "F", "P", "G",         "J", "L", "U", "Y", ";", "RCTL",
                "ESC",  "A", "R", "S", "T", "D",         "H", "N", "E", "I", "O", "RGUI",
                "LSFT", "Z", "X", "C", "V", "B",         "K", "M", ",", ".", "/", "DEL",
"KL(KC_BSPC, SYM)",  "KL(KC_SPC, NUM)",  "LSFT",         "KK(ENTER, KC_RSFT)",  "KL(KC_SPC, NUM)",  "KL(KC_BSPC, SYM)")

$butterstick_cols("QWERTY",
    "",    "", "",     "",     "",           "",       "",     "",     "",     "", "",
    "",    "", "",     "",     "",           "",       "",     "",     "",     "", "",
    "INS", "", "LALT", "LGUI", "LCTL",       "",       "RCTL", "RGUI", "RALT", "", "",
                       "LCTL", "MO(MOVE)",   "",       "TAB",  "")

$secret_chord("QWERTY", "MO(MEDIA)",
    "", "",  "",  "",  "",  "",        "", "", "", "", "", "",
    "", "X", "X", "X", "X", "",        "", "", "", "", "", "",
                  "",  "",  "",        "", "", "")

$secret_chord("QWERTY", "MK(RCTRL, RALT)",
    "", "", "", "", "",  "",            "",  "",  "",  "", "", "",
    "", "", "", "", "",  "",            "X", "X", "X", "X", "", "",
                "", "", "",             "",  "",  "")

$secret_chord("QWERTY", "MK(LCTRL, LALT)",
    "", "", "",  "",  "",   "",         "", "", "", "", "", "",
    "", "", "X", "X", "X",  "X",        "", "", "", "", "", "",
                 "",  "",  "",          "", "", "")

$secret_chord("QWERTY", "MK(RCTRL, RGUI)",
    "", "", "", "", "", "",            "",  "",  "",  "", "", "",
    "", "", "", "", "", "",            "X", "X", "X", "", "", "",
                "", "", "",            "",  "",  "")

$secret_chord("QWERTY", "MK(LCTRL, LGUI)",
    "", "", "", "",  "",  "",         "", "", "", "", "", "",
    "", "", "", "X", "X", "X",        "", "", "", "", "", "",
                "",  "",  "",         "", "", "")

$butterstick_rows("NUM",
    "",     "1",  "2",  "3",  "4",  "5",               "6",  "7",  "8",  "9",  "0",   "",
    "",     "",   "",   "",   "",   "",                "",   "",   "",   "",   "",    "",
    "LSFT", "F1", "F2", "F3", "F4", "F5",              "F6", "F7", "F8", "F9", "F10", "RSFT",
                        "",   "",   "",                "",   "",   "")

$butterstick_cols("NUM",
    "", "",    "",     "",     "",       "",       "",     "",     "",     "",    "",
    "", "",    "",     "",     "",       "",       "",     "",     "",     "",    "",
    "", "F11", "LALT", "LGUI", "LCTL",   "",       "RCTL", "RGUI", "RALT", "F12", "",
                       "",     "",       "",       "",     "")

$secret_chord("NUM", "MK(RCTRL, RALT)",
    "", "", "", "", "",  "",            "",  "",  "",  "", "", "",
    "", "", "", "", "",  "",            "X", "X", "X", "X", "", "",
                "", "", "",             "",  "",  "")

$secret_chord("NUM", "MK(LCTRL, LALT)",
    "", "", "",  "",  "",   "",         "", "", "", "", "", "",
    "", "", "X", "X", "X",  "X",        "", "", "", "", "", "",
                 "",  "",  "",          "", "", "")

$butterstick_rows("SYM",
    "", "KC_GRV",   "KC_LBRC", "KC_LCBR", "KC_LPRN", "KC_LABK",             "KC_RABK", "KC_RPRN", "KC_RCBR", "KC_RBRC", "KC_QUES", "RCTL",
    "", "KC_TILDE", "KC_MINS", "KC_QUOT", "KC_COLN", "KC_UNDS",             "KC_BSLS", "KC_EQL",  "KC_DQUO", "KC_PLUS", "KC_QUES", "RGUI",
    "", "KC_EXLM",  "KC_AT",   "KC_HASH", "KC_DLR",  "KC_PERC",             "KC_PIPE", "KC_CIRC", "KC_AMPR", "KC_ASTR", "KC_QUES", "RALT",
                                "",       "",        "",                     "",       "",        "")

$butterstick_cols("SYM",
    "", "", "",     "",     "",           "",       "",     "",     "",     "", "",
    "", "", "",     "",     "",           "",       "",     "",     "",     "", "",
    "", "", "LALT", "LGUI", "LCTL",       "",       "RCTL", "RGUI", "RALT", "", "",
                    "",     "",           "",       "",     "")

$butterstick_rows("MOVE",
    "",     "MK(LSFT, LCTL, LEFT)", "HOME", "UP",   "PGUP",  "MK(LSFT, LCTL, RIGHT)",             "", "",     "UP",   "",      "", "",
    "INS",  "MK(LSFT, LEFT)",       "END",  "",     "PGDN",  "MK(LSFT, RIGHT)",                   "", "LEFT", "DOWN", "RIGHT", "", "",
    "LSFT", "MK(LCTL, LEFT)",       "LEFT", "DOWN", "RIGHT", "MK(LCTL, RIGHT)",                   "", "LEFT", "DOWN", "RIGHT", "", "RSFT",
                                      "",     "",      "",                                        "", "",     "")

$butterstick_cols("MOVE",
    "", "", "",     "",     "",           "",       "",     "",     "",     "", "",
    "", "", "",     "",     "",           "",       "",     "",     "",     "", "",
    "", "", "LALT", "LGUI", "LCTL",       "",       "RCTL", "RGUI", "RALT", "", "",
                    "",     "",           "",       "",     "")

$butterstick_rows("MEDIA",
    "", "", "", "", "", "",              "", "KC_MPRV", "KC_MPLY", "KC_MPLY", "KC_MNXT", "",
    "", "", "", "", "", "",              "", "",        "",        "",        "KC_MUTE", "KC_VOLU",
    "", "", "", "", "", "",              "", "",        "",        "",        "",        "KC_VOLD",
                "", "", "",              "", "",        "")
// Register all chords, load chording logic
$include(engine_path + "chording_engine.inc")
